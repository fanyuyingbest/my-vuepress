# 14.动态规划：最优结构解决复杂问题

> 分治法使用必须满足的4个条件
- 1.问题的解决难度与数据规模有关
- 2.原问题可被分解
- 3.子问题的解可以合并为原问题的解
- 4.所有子问题相互独立

> 但是在实际工作中，存在一种前三个条件的都满足，但是最后一个条件不满足的情况。这就是动态规划算法

### 14-1 什么是动态规划

> <b>从数学的视角来看，动态规划是一种运筹学方法，是在多轮决策过程中的最优方法</b><br>
> 从分治法的视角来看，每个子问题必须相互独立，在多轮决策中，这个假设显然不成立，这也是动态规划方法产生的原因之一。

### 14-2 最短路径问题

![图示](/img/2020/algorithm/data14-1.png)

> 每个结点是一个位置，每条边是两个位置之间的距离，现在需要求解出一条由A到G的最短距离<br/>
> 不难发现，我们需要求解的路线是由A到G,这就意味着，路线为A-B-C-D-E-F，每一轮都有不同的决策，而每一次的决策又依赖上一轮的决策结果<br/>

> 例如，做D<sub>2</sub> -> E 的决策时，D<sub>2</sub> -> E<sub>2</sub> 的距离是1，最短。但这轮的决策，基于的假设是从D<sub>2</sub>出发，这就意味着，前面一轮的决策结果是D<sub>2</sub>。由此可见，相邻两轮的决策结果并不是相互独立的。

> <b>动态规划还有一个重要的概念叫作状态</b>，在这个例子中，状态是一个变量，而且受决策动作的影响。例如，第一轮决策状态是S<sub>1</sub>,可选的值为A,第二轮决策的状态是S<sub>2</sub>,可选的值就是B<sub>1</sub>和B<sub>2</sub>，以此类推。

### 14-3 动态规划的基本方法

> 动态规划问题之所以难，是因为动态规划的解题方法并没有那么标准化，它需要你因题而异，仔细分析问题并寻找方案。虽然动态规划问题没有标准的解题方法，但它有一些宏观层面通用的方法轮：

- 1.分阶段；将原问题划分成几个子问题，一个子问题就是多轮决策的一个阶段，它们可以是不满足独立性的
- 2.找状态：选择合适的状态变量S<sub>k</sub>,它需要具备描述多轮决策过程的演变，更像是决策可能的结果
- 3.做决策；确定决策变量u<sub>k</sub>.每一轮的决策就是每一轮可能决策动作，例如D<sub>2</sub>的可能决策动作是D<sub>2</sub> -> E<sub>2</sub>和D<sub>2</sub> -> E<sub>3</sub>
- 4.状态转移方程；这个步骤是动态规划最重要的核心，即是s<sub>k+1</sub> = u<sub>k</sub>(s<sub>k</sub>)
- 5.定目标；写出代表多轮决策目标的指标函数V<sub>k,n</sub>
- 6.寻找终止条件。

> 了解了方法轮、状态、多轮决策之后，我们再补充一些动态规划的基本概念
 - 策略，每轮的动作就是决策，多轮决策合在一起常常被称为策略
 - 策略集合，由于每轮的决策动作都是一个变量，这就导致合在一起的策略也是一个变量，我们通常会称所有可能的策略为策略集合。因此，动态规划的目标，也可以说是从策略集合中，找到最优的那个策略

> <b>一般而言，具有如下几个特征的问题，可以采用动态规划求解：</b>
- 1.最优子结构；它的含义是，原问题的最优解说包括的子问题的解也是最优的。例如，某个策略使A到G是最优的，假设它的途径了F<sub>i</sub>,那么它从A到F<sub>i</sub>也一定是最优的
- 2.无后效性。

